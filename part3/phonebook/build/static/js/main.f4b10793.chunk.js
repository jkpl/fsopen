(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(14),o=n.n(c),r=n(3),u=n(2),i=n(4),s=n.n(i),d="/api/persons";var j={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},update:function(e,t){return s.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},deleteById:function(e){return s.a.delete("".concat(d,"/").concat(e))}},b=function(e){var t=e.notification;if(!t||!t.message)return Object(a.jsx)(a.Fragment,{});var n="notification notification-".concat(t.status);return Object(a.jsx)("div",{className:n,children:t.message})},f=function(e){var t=e.value,n=e.setValue;return Object(a.jsxs)("div",{children:["filter shown with ",Object(a.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},l=function(e){var t=e.submit,n=e.nameValue,c=e.setName,o=e.numberValue,r=e.setNumber;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({name:n,number:o})},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:n,onChange:function(e){c(e.target.value)}})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:o,onChange:function(e){r(e.target.value)}})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.person,n=e.onDelete;return Object(a.jsxs)("div",{children:[t.name," ",t.number," ",Object(a.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name," ?"))&&n(t)},children:"delete"})]})},h=function(e){var t=e.persons,n=e.onDelete;return t.map((function(e){return Object(a.jsx)(m,{person:e,onDelete:n},e.id)}))},O=function(){var e=Object(u.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)(""),i=Object(r.a)(o,2),s=i[0],d=i[1],m=Object(u.useState)(""),O=Object(r.a)(m,2),v=O[0],p=O[1],x=Object(u.useState)(""),g=Object(r.a)(x,2),w=g[0],k=g[1],D=Object(u.useState)({}),y=Object(r.a)(D,2),C=y[0],N=y[1],S=""===w?n:n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));function V(e){var t=n.filter((function(t){return t.id!==e}));c(t)}function A(e){N(e),setTimeout((function(){N({})}),5e3)}return Object(u.useEffect)((function(){j.getAll().then(c)}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(b,{notification:C}),Object(a.jsx)(f,{value:w,setValue:k}),Object(a.jsx)("h3",{children:"Add a new"}),Object(a.jsx)(l,{submit:function(e){var t=n.find((function(t){return t.name===e.name}));if(t){var a="".concat(e.name," is already added to phonebook, replace the old number with a new one?");window.confirm(a)&&j.update(t.id,e).then((function(e){var t=n.map((function(t){return t.id===e.id?e:t}));c(t),A({message:"Updated ".concat(e.name),status:"ok"})}))}else j.create(e).then((function(e){c(n.concat(e)),A({message:"Added ".concat(e.name),status:"ok"})}))},nameValue:s,setName:d,numberValue:v,setNumber:p}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(h,{persons:S,onDelete:function(e){j.deleteById(e.id).then((function(){V(e.id),A({message:"Deleted ".concat(e.name),status:"ok"})})).catch((function(t){return t.response&&404===t.response.status?(V(e.id),void A({message:"Information of ".concat(e.name," has already been removed from server"),status:"fail"})):t}))}})]})};n(37);o.a.render(Object(a.jsx)(O,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.f4b10793.chunk.js.map